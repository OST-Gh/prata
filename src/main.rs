///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
use local_ip_address::{local_ip, Error};
use netspaces::{B24Ns192, IPv4Pns};
use std::io::{self, stdout, BufWriter, Write};
use std::net::{IpAddr, Ipv4Addr, Ipv6Addr, TcpListener, TcpStream};
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
mod call;
mod client;
mod netspaces;
mod server;
mod test;
mod util;
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
fn main() -> io::Result<()> {
	let mut iter = IPv4Pns::from(B24Ns192).into_iter();
	let mut out = BufWriter::new(stdout().lock());

	// [202407160951+0200] NOTE(by: @OST-Gh): current test code.
	while !iter.has_ended() {
		for i in 0..8 {
			let Some(addr) = iter.next() else { unreachable!() };
			let space: &[u8] = if i == 0 { b"" } else { b" " };
			let separator: &[u8] = if i == 7 { b"" } else { b"," };

			out.write_all(
				&[
					space,
					addr.to_string()
						.as_bytes(),
					separator,
				]
				.concat(),
			)?;
		}
		if !iter.has_ended() {
			out.write_all(b"\n")?;
		}
	}
	out.write_all(b"\0")?;
	out.flush()?;
	Ok(())
}
